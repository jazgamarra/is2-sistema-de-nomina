{% extends "base.html" %}
{% block content %}

<h2 class="text-center mb-4">Generar Nómina</h2>

<div class="container">

    <!-- Fila 1: Selección de período -->
    <div class="row mb-4">
        <div class="col-md-4">
            <label for="mes">Mes</label>
            <select id="mes" class="form-control">
                <option>Enero</option>
                <option>Febrero</option>
                <option>Marzo</option>
                <!-- ... -->
            </select>
        </div>
        <div class="col-md-4">
            <label for="anho">Año</label>
            <select id="anho" class="form-control">
                <option>2025</option>
                <option>2024</option>
            </select>
        </div>
        <div class="col-md-4 d-flex align-items-end">
            <button class="btn btn-primary w-100" style="background-color:#9c27b0;">Generar Nómina</button>
        </div>
    </div>

    <!-- Fila 2: Buscar por cédula -->
    <form method="get" class="mb-4">
        <label for="cedula">Buscar por Cédula</label>
        <div class="input-group">
            <input type="text" class="form-control" id="cedula" name="cedula"
                   placeholder="Ingrese la cédula del empleado"
                   value="{{ cedula }}">
            <button type="submit" class="btn btn-primary">Buscar</button>
        </div>
    </form>

    <!-- Lista de nómina generada -->
    <div class="mb-4">
        <h5>Lista de Nómina Generada</h5>
        <table class="table table-bordered">
            <thead>
                <tr>
                    <th>Empleado</th>
                    <th>Salario</th>
                    <th>Bonos</th>
                    <th>Descuentos</th>
                    <th>Total</th>
                </tr>
            </thead>
            <tbody>
                {% for n in nominas %}
                <tr>
                    <td>{{ n.empleado.nombres }} {{ n.empleado.apellidos }}</td>
                    <td>{{ n.salario|floatformat:0 }} Gs</td>
                    <td>{{ n.bonos|floatformat:0 }} Gs</td>
                    <td>{{ n.descuentos|floatformat:0 }} Gs</td>
                    <td>{{ n.total|floatformat:0 }} Gs</td>
                </tr>
                {% empty %}
                <tr>
                    <td colspan="5" class="text-center">No se encontraron resultados.</td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>

    <!-- Botones finales -->
    <div class="d-flex justify-content-between">
        <button class="btn btn-secondary mb-5">Generar PDF</button>
        <button class="btn btn-success mb-5">Confirmar Nómina</button>
    </div>
</div>

{% endblock %}